<%= content_tag :h1, I18n.t('batch.web.page_titles.batches') %>
<% unless @batches.empty? %>
<%= content_tag :table, :class => 'table table-bordered table-striped table-condensed' do %>
	<%= content_tag :thead do %>
		<%= content_tag :tr do %>
			<%= content_tag :th, '', :scope => 'col', :colspan => 5 %>
			<%= content_tag :th, I18n.t('batch.web.column_names.last_run'), :scope => 'col', :colspan => 3 %>
		<% end %>
		<%= content_tag :tr do %>
			<%= content_tag :th, I18n.t('batch.web.column_names.id'), :scope => 'col' %>
			<%= content_tag :th, I18n.t('batch.web.column_names.name'), :scope => 'col' %>
			<%= content_tag :th, I18n.t('batch.web.column_names.description'), :scope => 'col' %>
			<%= content_tag :th, I18n.t('batch.web.column_names.objects'), :scope => 'col' %>
			<%= content_tag :th, I18n.t('batch.web.column_names.runs'), :scope => 'col' %>
			<%= content_tag :th, I18n.t('batch.web.column_names.start'), :scope => 'col' %>
			<%= content_tag :th, I18n.t('batch.web.column_names.status'), :scope => 'col' %>
			<%= content_tag :th, I18n.t('batch.web.column_names.outcome'), :scope => 'col' %>
		<% end %>

	<% end %>
	<%= content_tag :tbody do %>
		<% @batches.each do |b| %>
		<%= content_tag :tr do %>
			<%= content_tag :td, link_to(b.id, batch_path(b)) %>
			<%= content_tag :td, b.name %>
			<%= content_tag :td, b.description %>
			<%= content_tag :td, b.batch_objects.count %>
			<%= content_tag :td, b.batch_runs.count %>
			<%= content_tag :td, b.batch_runs.empty? ? '--' : b.batch_runs.last.start.getlocal.strftime("%Y-%m-%d %H:%M:%S") %>
			<%= content_tag :td, b.batch_runs.empty? ? '--' : b.batch_runs.last.status %>
			<%= content_tag :td, b.batch_runs.empty? ? '--' : b.batch_runs.last.outcome %>
		<% end %>
		<% end %>
	<% end %>
<% end %>
<% else %>
	<%= content_tag :p, I18n.t('batch.web.no_batches') %>
<% end %>