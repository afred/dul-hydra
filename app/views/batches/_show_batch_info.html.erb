<%= content_tag :p, link_to("Validate batch", validate_batch_path(@batch)) %>
<%= content_tag :table, :class => 'table table-bordered table-striped table-condensed' do %>
	<%= content_tag :thead do %>
		<%= content_tag :tr do %>
			<%= content_tag :th, '', :scope => 'col', :colspan => 4 %>
			<%= content_tag :th, I18n.t('batch.web.column_names.last_run'), :scope => 'col', :colspan => 3 %>
		<% end %>
		<%= content_tag :tr do %>
			<%= content_tag :th, I18n.t('batch.web.column_names.name'), :scope => 'col' %>
			<%= content_tag :th, I18n.t('batch.web.column_names.description'), :scope => 'col' %>
			<%= content_tag :th, I18n.t('batch.web.column_names.objects'), :scope => 'col' %>
			<%= content_tag :th, I18n.t('batch.web.column_names.runs'), :scope => 'col' %>
			<%= content_tag :th, I18n.t('batch.web.column_names.start'), :scope => 'col' %>
			<%= content_tag :th, I18n.t('batch.web.column_names.status'), :scope => 'col' %>
			<%= content_tag :th, I18n.t('batch.web.column_names.outcome'), :scope => 'col' %>
		<% end %>

	<% end %>
	<%= content_tag :tbody do %>
		<%= content_tag :tr do %>
			<%= content_tag :td, @batch.name %>
			<%= content_tag :td, @batch.description %>
			<%= content_tag :td, @batch.batch_objects.count %>
			<%= content_tag :td, @batch.batch_runs.count %>
			<%= content_tag :td, @batch.batch_runs.empty? ? '--' : @batch.batch_runs.last.start.getlocal.strftime("%Y-%m-%d %H:%M:%S") %>
			<%= content_tag :td, @batch.batch_runs.empty? ? '--' : @batch.batch_runs.last.status %>
			<%= content_tag :td, @batch.batch_runs.empty? ? '--' : @batch.batch_runs.last.outcome %>
		<% end %>
	<% end %>
<% end %>
<% unless @errors.blank? %>
	<%= content_tag :h3, I18n.t('batch.web.headings.object_validation_errors') %>
	<%= content_tag :ul do %>
		<% @errors.each do |error| %>
			<%= content_tag :li, error %>	
		<% end %>
	<% end %>
<% end %>
